CREATE TABLE city (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, cp VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pet (id INT AUTO_INCREMENT NOT NULL, owner_id INT DEFAULT NULL, avatar_id INT DEFAULT NULL, petname VARCHAR(255) NOT NULL, nickname VARCHAR(255) DEFAULT NULL, birthday DATETIME DEFAULT NULL, description LONGTEXT DEFAULT NULL, sex SMALLINT NOT NULL, sterilize SMALLINT DEFAULT NULL, weight INT DEFAULT NULL, friendly INT DEFAULT NULL, petType_id INT DEFAULT NULL, INDEX IDX_E4529B857E3C61F9 (owner_id), INDEX IDX_E4529B85BCB0DC1E (petType_id), INDEX IDX_E4529B8586383B10 (avatar_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE petrescue (id INT AUTO_INCREMENT NOT NULL, location_id INT DEFAULT NULL, owner_id INT DEFAULT NULL, avatar_id INT DEFAULT NULL, petname VARCHAR(255) NOT NULL, keywords VARCHAR(255) DEFAULT NULL, description LONGTEXT DEFAULT NULL, sex SMALLINT NOT NULL, rescueType SMALLINT NOT NULL, taille SMALLINT NOT NULL, petType_id INT DEFAULT NULL, INDEX IDX_DD35BB0464D218E (location_id), INDEX IDX_DD35BB047E3C61F9 (owner_id), INDEX IDX_DD35BB04BCB0DC1E (petType_id), INDEX IDX_DD35BB0486383B10 (avatar_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE petrescue_photo (petrescue_id INT NOT NULL, photo_id INT NOT NULL, INDEX IDX_20ADBD6730CADE61 (petrescue_id), INDEX IDX_20ADBD677E9E4C8C (photo_id), PRIMARY KEY(petrescue_id, photo_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pet_star (id INT AUTO_INCREMENT NOT NULL, pet_id INT DEFAULT NULL, date DATETIME NOT NULL, description LONGTEXT DEFAULT NULL, UNIQUE INDEX UNIQ_D293BF7E966F7FB6 (pet_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pet_type (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, description LONGTEXT DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE photo (id INT AUTO_INCREMENT NOT NULL, owner_id INT DEFAULT NULL, title VARCHAR(255) DEFAULT NULL, description LONGTEXT DEFAULT NULL, created DATETIME DEFAULT NULL, INDEX IDX_14B784187E3C61F9 (owner_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE post (id INT AUTO_INCREMENT NOT NULL, owner_id INT DEFAULT NULL, topic_id INT DEFAULT NULL, photo_id INT DEFAULT NULL, title VARCHAR(255) NOT NULL, created DATETIME NOT NULL, content LONGTEXT DEFAULT NULL, INDEX IDX_5A8A6C8D7E3C61F9 (owner_id), INDEX IDX_5A8A6C8D1F55203D (topic_id), INDEX IDX_5A8A6C8D7E9E4C8C (photo_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE postcategory (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, created DATETIME NOT NULL, description LONGTEXT DEFAULT NULL, nbtopic INT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE product (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, description LONGTEXT DEFAULT NULL, productCategory_id INT DEFAULT NULL, productBrand_id INT DEFAULT NULL, INDEX IDX_D34A04AD64F6BD66 (productCategory_id), INDEX IDX_D34A04AD18124893 (productBrand_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE productBrand (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, description LONGTEXT DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE productCategory (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, alias VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE productoffer (id INT AUTO_INCREMENT NOT NULL, product_id INT DEFAULT NULL, link VARCHAR(255) NOT NULL, quantiteunit VARCHAR(20) NOT NULL, price DOUBLE PRECISION NOT NULL, quantity INT NOT NULL, productSeller_id INT DEFAULT NULL, INDEX IDX_F91BD584EA698D8D (productSeller_id), INDEX IDX_F91BD5844584665A (product_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE productseller (id INT AUTO_INCREMENT NOT NULL, avatar_id INT DEFAULT NULL, title VARCHAR(255) NOT NULL, address VARCHAR(255) DEFAULT NULL, cp VARCHAR(255) DEFAULT NULL, city VARCHAR(255) DEFAULT NULL, country INT DEFAULT NULL, telephone VARCHAR(255) DEFAULT NULL, mail VARCHAR(255) DEFAULT NULL, website VARCHAR(255) DEFAULT NULL, description LONGTEXT DEFAULT NULL, INDEX IDX_D07E443C86383B10 (avatar_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE score (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, score INT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE seller (id INT AUTO_INCREMENT NOT NULL, avatar_id INT DEFAULT NULL, title VARCHAR(255) NOT NULL, address VARCHAR(255) DEFAULT NULL, cp VARCHAR(255) DEFAULT NULL, city VARCHAR(255) DEFAULT NULL, country INT DEFAULT NULL, telephone VARCHAR(255) DEFAULT NULL, mail VARCHAR(255) DEFAULT NULL, website VARCHAR(255) DEFAULT NULL, description LONGTEXT DEFAULT NULL, sellerType_id INT DEFAULT NULL, INDEX IDX_FB1AD3FC86383B10 (avatar_id), INDEX IDX_FB1AD3FC46B295A6 (sellerType_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE seller_type (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, description LONGTEXT DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE session (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, date DATETIME NOT NULL, sid VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_D044D5D457167AB4 (sid), INDEX IDX_D044D5D4A76ED395 (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE topic (id INT AUTO_INCREMENT NOT NULL, owner_id INT DEFAULT NULL, title VARCHAR(255) NOT NULL, nbposts INT NOT NULL, created DATETIME NOT NULL, description LONGTEXT DEFAULT NULL, postCategory_id INT DEFAULT NULL, INDEX IDX_9D40DE1B7E3C61F9 (owner_id), INDEX IDX_9D40DE1BD4E9EB8C (postCategory_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE topic_user (topic_id INT NOT NULL, user_id INT NOT NULL, INDEX IDX_B578B7FC1F55203D (topic_id), INDEX IDX_B578B7FCA76ED395 (user_id), PRIMARY KEY(topic_id, user_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user (id INT AUTO_INCREMENT NOT NULL, avatar_id INT DEFAULT NULL, firstName VARCHAR(255) DEFAULT NULL, lastName VARCHAR(255) DEFAULT NULL, nickname VARCHAR(255) DEFAULT NULL, password VARCHAR(255) DEFAULT NULL, presentation VARCHAR(255) DEFAULT NULL, address VARCHAR(255) DEFAULT NULL, cp VARCHAR(255) DEFAULT NULL, city VARCHAR(255) DEFAULT NULL, country INT DEFAULT NULL, sex SMALLINT NOT NULL, mail VARCHAR(255) NOT NULL, fbid VARCHAR(255) DEFAULT NULL, created DATETIME DEFAULT NULL, birthday DATETIME DEFAULT NULL, score INT DEFAULT NULL, UNIQUE INDEX UNIQ_8D93D6495126AC48 (mail), INDEX IDX_8D93D64986383B10 (avatar_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user_photo (user_id INT NOT NULL, photo_id INT NOT NULL, INDEX IDX_F6757F40A76ED395 (user_id), INDEX IDX_F6757F407E9E4C8C (photo_id), PRIMARY KEY(user_id, photo_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user_user (user_source INT NOT NULL, user_target INT NOT NULL, INDEX IDX_F7129A803AD8644E (user_source), INDEX IDX_F7129A80233D34C1 (user_target), PRIMARY KEY(user_source, user_target)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE variable (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, value VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE wallpost (id INT AUTO_INCREMENT NOT NULL, owner_id INT DEFAULT NULL, photo_id INT DEFAULT NULL, created DATETIME NOT NULL, content LONGTEXT DEFAULT NULL, INDEX IDX_B64CE64D7E3C61F9 (owner_id), INDEX IDX_B64CE64D7E9E4C8C (photo_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE pet ADD CONSTRAINT FK_E4529B857E3C61F9 FOREIGN KEY (owner_id) REFERENCES user (id);
ALTER TABLE pet ADD CONSTRAINT FK_E4529B85BCB0DC1E FOREIGN KEY (petType_id) REFERENCES pet_type (id);
ALTER TABLE pet ADD CONSTRAINT FK_E4529B8586383B10 FOREIGN KEY (avatar_id) REFERENCES photo (id);
ALTER TABLE petrescue ADD CONSTRAINT FK_DD35BB0464D218E FOREIGN KEY (location_id) REFERENCES city (id);
ALTER TABLE petrescue ADD CONSTRAINT FK_DD35BB047E3C61F9 FOREIGN KEY (owner_id) REFERENCES user (id);
ALTER TABLE petrescue ADD CONSTRAINT FK_DD35BB04BCB0DC1E FOREIGN KEY (petType_id) REFERENCES pet_type (id);
ALTER TABLE petrescue ADD CONSTRAINT FK_DD35BB0486383B10 FOREIGN KEY (avatar_id) REFERENCES photo (id);
ALTER TABLE petrescue_photo ADD CONSTRAINT FK_20ADBD6730CADE61 FOREIGN KEY (petrescue_id) REFERENCES petrescue (id) ON DELETE CASCADE;
ALTER TABLE petrescue_photo ADD CONSTRAINT FK_20ADBD677E9E4C8C FOREIGN KEY (photo_id) REFERENCES photo (id) ON DELETE CASCADE;
ALTER TABLE pet_star ADD CONSTRAINT FK_D293BF7E966F7FB6 FOREIGN KEY (pet_id) REFERENCES pet (id);
ALTER TABLE photo ADD CONSTRAINT FK_14B784187E3C61F9 FOREIGN KEY (owner_id) REFERENCES user (id);
ALTER TABLE post ADD CONSTRAINT FK_5A8A6C8D7E3C61F9 FOREIGN KEY (owner_id) REFERENCES user (id);
ALTER TABLE post ADD CONSTRAINT FK_5A8A6C8D1F55203D FOREIGN KEY (topic_id) REFERENCES topic (id);
ALTER TABLE post ADD CONSTRAINT FK_5A8A6C8D7E9E4C8C FOREIGN KEY (photo_id) REFERENCES photo (id);
ALTER TABLE product ADD CONSTRAINT FK_D34A04AD64F6BD66 FOREIGN KEY (productCategory_id) REFERENCES productCategory (id);
ALTER TABLE product ADD CONSTRAINT FK_D34A04AD18124893 FOREIGN KEY (productBrand_id) REFERENCES productBrand (id);
ALTER TABLE productoffer ADD CONSTRAINT FK_F91BD584EA698D8D FOREIGN KEY (productSeller_id) REFERENCES productseller (id);
ALTER TABLE productoffer ADD CONSTRAINT FK_F91BD5844584665A FOREIGN KEY (product_id) REFERENCES product (id);
ALTER TABLE productseller ADD CONSTRAINT FK_D07E443C86383B10 FOREIGN KEY (avatar_id) REFERENCES photo (id);
ALTER TABLE seller ADD CONSTRAINT FK_FB1AD3FC86383B10 FOREIGN KEY (avatar_id) REFERENCES photo (id);
ALTER TABLE seller ADD CONSTRAINT FK_FB1AD3FC46B295A6 FOREIGN KEY (sellerType_id) REFERENCES seller_type (id);
ALTER TABLE session ADD CONSTRAINT FK_D044D5D4A76ED395 FOREIGN KEY (user_id) REFERENCES user (id);
ALTER TABLE topic ADD CONSTRAINT FK_9D40DE1B7E3C61F9 FOREIGN KEY (owner_id) REFERENCES user (id);
ALTER TABLE topic ADD CONSTRAINT FK_9D40DE1BD4E9EB8C FOREIGN KEY (postCategory_id) REFERENCES postcategory (id);
ALTER TABLE topic_user ADD CONSTRAINT FK_B578B7FC1F55203D FOREIGN KEY (topic_id) REFERENCES topic (id) ON DELETE CASCADE;
ALTER TABLE topic_user ADD CONSTRAINT FK_B578B7FCA76ED395 FOREIGN KEY (user_id) REFERENCES user (id) ON DELETE CASCADE;
ALTER TABLE user ADD CONSTRAINT FK_8D93D64986383B10 FOREIGN KEY (avatar_id) REFERENCES photo (id);
ALTER TABLE user_photo ADD CONSTRAINT FK_F6757F40A76ED395 FOREIGN KEY (user_id) REFERENCES user (id) ON DELETE CASCADE;
ALTER TABLE user_photo ADD CONSTRAINT FK_F6757F407E9E4C8C FOREIGN KEY (photo_id) REFERENCES photo (id) ON DELETE CASCADE;
ALTER TABLE user_user ADD CONSTRAINT FK_F7129A803AD8644E FOREIGN KEY (user_source) REFERENCES user (id) ON DELETE CASCADE;
ALTER TABLE user_user ADD CONSTRAINT FK_F7129A80233D34C1 FOREIGN KEY (user_target) REFERENCES user (id) ON DELETE CASCADE;
ALTER TABLE wallpost ADD CONSTRAINT FK_B64CE64D7E3C61F9 FOREIGN KEY (owner_id) REFERENCES user (id);
ALTER TABLE wallpost ADD CONSTRAINT FK_B64CE64D7E9E4C8C FOREIGN KEY (photo_id) REFERENCES photo (id);
